# first

## setup

脱胎与vue3的composition api，组合式api

vue2中的组件写法称之为选项式api

为什么弃用vue2的写法（并不是完全弃用，其实还是兼容的），官网文档说法如下

> 用组件的选项 (`data`、`computed`、`methods`、`watch`) 组织逻辑在大多数情况下都有效。然而，当我们的组件变得更大时，**逻辑关注点**的列表也会增长。这可能会导致组件难以阅读和理解，尤其是对于那些一开始就没有编写这些组件的人来说。'
>
> 这种碎片化使得理解和维护复杂组件变得困难。选项的分离掩盖了潜在的逻辑问题。此外，在处理单个逻辑关注点时，我们必须不断地“跳转”相关代码的选项块。
>
> 如果我们能够将与同一个逻辑关注点相关的代码配置在一起会更好。而这正是组合式 API 使我们能够做到的'

- 个人理解

  文档中有一个说法是**逻辑关注点**，但是换一种更通俗的说法其实就是**业务逻辑**

  官方推出setup的写法，更接近函数式的编程范式，将一些完整的业务逻辑链路封装在一个个的setup函数中

  注意，我这里用到的说法是“一些”业务逻辑和“一个个”setup函数，而不是一个组件一个setup，然后包含又臭又长的业务逻辑代码，和视图组件严重耦合。如果真是这样，那和vue2的写法其实也没有太大的区别

  其实在没有完整的看完文档之前，我也有这种疑虑，直到看到文档中的说明

  > 对于其他的**逻辑关注点**我们也可以这样做，但是你可能已经在问这个问题了——*这不就是把代码移到 `setup` 选项并使它变得非常大吗*？嗯，那是真的。这就是为什么在继续其他任务之前，我们将首先将上述代码提取到一个独立的**组合式函数**。

  这种抽离业务逻辑的做法当然是相当高明的，隐晦的保留了`data`、`computed`、`methods`、`watch`几大特性的同时又抽离了业务，甚至可以说每一个setup都可以当做一个mixin，并且要比mixin更安全也更容易管理和溯源，妙啊

